## CSRF 攻击原理以及流程
CSRF（Cross-Site Request Forgery）攻击，也称为“跨站请求伪造”攻击，是一种常见的网络攻击方式。攻击者利用用户已登录的身份，在用户不知情的情况下，伪造用户的请求，向指定的网站发送请求。接下来，我将介绍 CSRF 攻击的原理以及攻击流程。

CSRF 攻击原理：

当用户登录某个网站时，服务器会为该用户颁发一个会话 ID，该会话 ID 被存储在客户端的 Cookie 中，每次请求都会带上该 Cookie，以便服务器能够识别当前用户的身份。攻击者利用用户已经登录的身份，通过某种方式，向用户的浏览器中注入恶意代码（例如，在论坛中发表一个恶意的帖子，其中包含针对某个网站的攻击代码）。

当用户浏览恶意代码所在的页面时，恶意代码会自动发起向指定网站的请求，但此时请求中会带上用户的 Cookie，服务器无法判断该请求是用户主动发起的，还是被攻击者伪造的。如果服务器没有采取防御措施，就会执行该请求，导致攻击成功。

CSRF 攻击流程：

攻击者创建一个恶意网站或者利用某个合法网站漏洞，将恶意代码嵌入到页面中。

受害者访问该网站，浏览器会加载恶意代码，向指定网站发起请求。

请求中会带上用户的 Cookie，服务器无法判断该请求是用户主动发起的，还是被攻击者伪造的。

如果服务器没有采取防御措施，就会执行该请求，导致攻击成功。

### 场景
钓鱼邮件，有个链接，你一点击，如果你当前cookie中存在了目标网站的登录信息啥的，你点击那个链接之后，他就会拿着你的cookie模拟你向目标
web服务器发送请求，从而post一些事情

## 如何防范

确认接收到的请求是合法的(合法的客户端)  
方法：使用CSRF token。  
原理：用户访问修改email界面时，server端生成一个token保存在server端，同时也返回给前端页面的form中，并且要求提交表单的时候携带回来。这样server端接收到请求时，会校验token是否合法。


